/* --- 基础样式 --- */
:root { --app-font-size: 11px; --bg-color: #f2f2f7; --separator-color: #c6c6c8; --blue: #007aff; --red: #ff3b30; --green: #34c759; --orange: #ff9500; --purple: #af52de; --teal: #5ac8fa; }
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; user-select: none; font-family: inherit; }

/* 彻底锁死 html 和 body，防止 iOS 键盘弹出时页面整体滑动 */
html {
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: fixed;
    top: 0;
    left: 0;
    overscroll-behavior: none; /* 阻止橡皮筋效果 */
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: #f2f2f7; 
    height: 100%; 
    width: 100%; 
    overflow: hidden;
    position: fixed; 
    top: 0;
    left: 0;
    overscroll-behavior: none;
}

/* 强制全局字体继承 */
body, input, textarea, select, button {
    font-family: inherit !important;
}

/* --- 核心应用容器 --- */
#app-root {
    width: 100%;
    height: 100%; /* 初始高度 100%，由 JS 动态接管 */
    position: absolute; 
    top: 0;
    left: 0;
    overflow: hidden;
    background-color: #f2f2f7;
}

/* --- SVG 图标通用类 --- */
.svg-icon { width: 24px; height: 24px; fill: currentColor; }

/* --- 屏幕容器 --- */
.screen {
    width: 100%; height: 100%;
    background: linear-gradient(180deg, #2c3e50 0%, #4ca1af 100%);
    background-size: cover; background-position: center;
    position: absolute; 
    top: 0; 
    left: 0;
    display: flex; flex-direction: column; justify-content: space-between;
    padding-top: env(safe-area-inset-top, 44px);
    padding-bottom: env(safe-area-inset-bottom, 20px);
    transition: background 0.3s ease;
    z-index: 1; 
}

.status-bar-placeholder { height: 20px; width: 100%; flex-shrink: 0; }

/* --- 桌面布局 --- */
.home-grid {
    flex: 1; display: grid;
    grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(7, 1fr);
    gap: 15px 10px; padding: 20px 20px 0 20px;
    justify-items: center; align-items: start;
}

/* --- 小组件样式 --- */
.widget-item {
    grid-column: 1 / span 4; grid-row: 1 / span 2;
    width: 100%; height: 100%;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
    border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    position: relative;
    color: white;
    background-size: cover; background-position: center; cursor: pointer; overflow: hidden;
}

.widget-corner {
    position: absolute;
    z-index: 2;
    font-size: 14px;
    font-weight: 500;
    text-shadow: 0 2px 4px rgba(0,0,0,0.8);
    padding: 15px;
}

.widget-top-left { top: 0; left: 0; font-size: 24px; font-weight: 300; }
.widget-top-right { top: 0; right: 0; opacity: 0.9; }
.widget-bottom-left { bottom: 0; left: 0; display: flex; align-items: center; gap: 4px; }
.widget-bottom-right { bottom: 0; right: 0; display: flex; align-items: center; gap: 4px; }

.widget-icon-svg {
    width: 20px;
    height: 20px;
    fill: white;
    filter: drop-shadow(0 2px 2px rgba(0,0,0,0.5));
}

.widget-center {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 2;
    width: 100%;
}

.widget-avatar {
    width: 90px; height: 90px;
    border-radius: 50%;
    background-color: rgba(255,255,255,0.3);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E");
    background-size: 60%; background-repeat: no-repeat; background-position: center;
    border: 2px solid rgba(255,255,255,0.6); cursor: pointer;
    margin-bottom: 8px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

.widget-text {
    font-size: 16px; font-weight: 600; text-align: center;
    text-shadow: 0 2px 4px rgba(0,0,0,0.8);
    background: transparent; 
    padding: 4px 12px; border-radius: 12px;
    cursor: pointer; max-width: 80%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* --- APP 样式 --- */
.grid-cell { width: 100%; height: 100%; display: flex; justify-content: center; align-items: flex-start; position: relative; }
.app-item { display: flex; flex-direction: column; align-items: center; width: 100%; cursor: pointer; position: relative; z-index: 1; }
.app-item.dragging { opacity: 0.5; }
.app-ghost { position: fixed; pointer-events: none; z-index: 9999; width: 70px; height: 70px; opacity: 0.9; transform: scale(1.1); display: flex; flex-direction: column; align-items: center; }
.app-ghost .app-icon { box-shadow: 0 10px 20px rgba(0,0,0,0.3); }
.app-ghost .app-name { display: none; }

.app-icon {
    width: 60px; height: 60px;
    background-color: #f0f0f0; background-size: cover; background-position: center;
    border-radius: 14px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    margin-bottom: 5px; transition: transform 0.1s; position: relative;
    display: flex; align-items: center; justify-content: center;
}
.app-icon:active { filter: brightness(0.8); transform: scale(0.95); }
.app-name {
    color: white; font-size: var(--app-font-size);
    text-shadow: 0 1px 2px rgba(0,0,0,0.5); text-align: center;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%;
    transition: font-size 0.1s; pointer-events: none;
}
.default-icon-svg { width: 32px; height: 32px; fill: #8e8e93; }
.app-icon[style*="url"] .default-icon-svg { display: none; }

/* --- Dock 栏 --- */
.dock-container { 
    position: absolute;
    bottom: 20px;
    left: 0;
    width: 100%; 
    display: flex; 
    justify-content: center; 
    padding: 0 15px;
    padding-bottom: env(safe-area-inset-bottom);
    z-index: 10;
}
.dock {
    width: 100%; height: 90px;
    background: rgba(255, 255, 255, 0.25); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
    border-radius: 35px; display: flex; justify-content: space-around; align-items: center; padding: 0 15px;
}
.dock .app-item { width: auto; }
.dock .app-icon { margin-bottom: 0; }
.dock .app-name { font-size: 11px !important; display: none; }

@media (min-width: 400px) { .app-icon { width: 68px; height: 68px; border-radius: 16px; } }

/* --- 模态框通用 --- */
.settings-modal {
    position: absolute; 
    top: 0; left: 0; width: 100%; height: 100%;
    background-color: var(--bg-color); z-index: 1000;
    display: none; 
    opacity: 0;
    transform: scale(0.95);
    transition: opacity 0.2s ease, transform 0.2s ease;
    flex-direction: column; padding-top: env(safe-area-inset-top, 20px);
}
.settings-modal.open { 
    display: flex; 
    opacity: 1; 
    transform: scale(1);
}

.settings-modal.sub-page { 
    display: flex; 
    transform: translateX(100%); 
    z-index: 1100; 
    opacity: 1; 
}
.settings-modal.sub-page.open { transform: translateX(0); }

.settings-header {
    padding: 0 15px; background: #fff; display: flex; justify-content: space-between; align-items: center;
    border-bottom: 1px solid #e5e5e5; height: 50px; flex-shrink: 0;
}
.header-left, .header-right { width: 80px; display: flex; align-items: center; }
.header-right { justify-content: flex-end; }
.header-title { font-weight: 600; font-size: 17px; flex: 1; text-align: center; }
.nav-btn { color: var(--blue); background: none; border: none; font-size: 17px; cursor: pointer; padding: 10px 0; display: flex; align-items: center; }
.back-svg { width: 20px; height: 20px; fill: var(--blue); margin-right: 2px; }

.settings-content { 
    flex: 1; 
    overflow-y: auto; 
    padding: 20px; 
    padding-bottom: calc(100px + env(safe-area-inset-bottom)); 
    position: relative; 
}

/* 键盘弹出时，取消底部安全区 Padding */
body.keyboard-open .settings-content {
    padding-bottom: 20px;
}

/* --- Theme Studio 样式 --- */
.tab-content { display: none; animation: fadeIn 0.3s ease; }
.tab-content.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
.settings-tab-bar {
    position: absolute; bottom: 0; left: 0; width: 100%; height: 60px;
    background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(20px);
    border-top: 1px solid #c6c6c8;
    display: flex; justify-content: space-around; align-items: center;
    padding-bottom: env(safe-area-inset-bottom, 10px); z-index: 10;
}
.tab-item { flex: 1; display: flex; align-items: center; justify-content: center; height: 100%; color: #999; font-size: 16px; font-weight: 600; cursor: pointer; flex-direction: column; gap: 4px; }
.tab-item.active { color: var(--blue); }
.tab-icon { width: 24px; height: 24px; fill: currentColor; }
.tab-label { font-size: 10px; }

.settings-group { background: #fff; border-radius: 10px; margin-bottom: 20px; padding: 0 15px; overflow: hidden; }
.settings-title { font-size: 13px; color: #6d6d72; margin-bottom: 8px; margin-left: 15px; text-transform: uppercase; }
.settings-row { padding: 12px 0; border-bottom: 1px solid #e5e5e5; display: flex; flex-direction: column; gap: 8px; }
.settings-row:last-child { border-bottom: none; }
.row-label { font-size: 15px; font-weight: 500; }

input[type="text"], input[type="password"], select, textarea { 
    width: 100%; padding: 10px; border: 1px solid #e5e5e5; border-radius: 8px; 
    font-size: 16px; background: #f9f9f9; -webkit-appearance: none; font-family: inherit; 
}

.ios-select, .ios-textarea {
    background-color: #f2f2f7;
    border: none;
    border-radius: 10px;
    padding: 12px;
    font-size: 16px;
    color: #000;
    width: 100%;
    -webkit-appearance: none;
    appearance: none;
}
.ios-select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='%238e8e93'%3E%3Cpath d='M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 30px;
}
.ios-textarea { min-height: 120px; resize: none; }

textarea { resize: vertical; min-height: 100px; }
input[type="range"] { width: 100%; margin: 10px 0; accent-color: var(--blue); }
button.action-btn { width: 100%; padding: 12px; background-color: var(--blue); color: white; border: none; border-radius: 10px; font-size: 15px; cursor: pointer; font-weight: 600; margin-top: 5px; }
button.action-btn.secondary { background-color: #e5e5ea; color: #000; }
button.action-btn.destructive { background-color: #ff3b30; color: white; margin-top: 10px; }

.wallpaper-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 15px 0; }
.wallpaper-item { aspect-ratio: 9/16; border-radius: 8px; background-size: cover; background-position: center; position: relative; cursor: pointer; border: 2px solid transparent; overflow: hidden; }
.wallpaper-delete { position: absolute; top: 0; right: 0; width: 30px; height: 30px; background: rgba(0,0,0,0.5); color: white; border-bottom-left-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 16px; z-index: 2; }
.preset-list { display: flex; flex-wrap: wrap; gap: 10px; min-height: 30px; }
.preset-tag { background: var(--blue); color: white; padding: 0; border-radius: 18px; font-size: 13px; display: flex; align-items: stretch; box-shadow: 0 2px 4px rgba(0,0,0,0.1); overflow: hidden; }
.preset-name { padding: 8px 12px; cursor: pointer; display: flex; align-items: center; }
.preset-delete { background: rgba(0,0,0,0.15); width: 36px; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 16px; font-weight: bold; border-left: 1px solid rgba(255,255,255,0.1); }

.app-edit-item { display: flex; align-items: center; gap: 15px; padding: 12px 0; border-bottom: 1px solid #f0f0f0; }
.hidden-file-input { display: none; }
.app-edit-preview { width: 54px; height: 54px; background-color: #f0f0f0; border-radius: 12px; background-size: cover; background-position: center; flex-shrink: 0; cursor: pointer; position: relative; border: 1px solid #e5e5e5; display: flex; align-items: center; justify-content: center; }
.camera-icon { width: 24px; height: 24px; fill: #999; opacity: 0.5; }
.app-edit-preview[style*="url"] .camera-icon { display: none; }
.app-edit-inputs { flex: 1; display: flex; flex-direction: column; gap: 8px; }

/* --- iOS 设置页面样式 --- */
.ios-settings-content { padding: 0; background-color: #f2f2f7; }
.ios-search-bar { padding: 10px 16px; background: #f2f2f7; }
.ios-search-input { width: 100%; background: #e3e3e8; border: none; border-radius: 10px; padding: 8px 12px; font-size: 16px; color: #000; text-align: center; }

.ios-profile-card { display: flex; align-items: center; background: #fff; padding: 12px 16px; margin-bottom: 20px; cursor: pointer; }
.ios-profile-card:active { background-color: #e5e5e5; }
.ios-profile-avatar { width: 60px; height: 60px; border-radius: 50%; background: #e5e5ea; margin-right: 15px; display: flex; align-items: center; justify-content: center; color: #8e8e93; font-size: 24px; font-weight: 500; background-size: cover; background-position: center; overflow: hidden; }
.ios-profile-info { flex: 1; }
.ios-profile-info h3 { font-size: 19px; font-weight: 400; margin-bottom: 4px; }
.ios-profile-info p { font-size: 13px; color: #333; }

.ios-list-group { background: #fff; margin-bottom: 20px; border-top: 1px solid #e5e5e5; border-bottom: 1px solid #e5e5e5; }
@media (min-width: 400px) { .ios-list-group { border-radius: 10px; margin: 0 16px 20px 16px; border: none; } }

.ios-list-item { display: flex; align-items: center; padding-left: 16px; min-height: 44px; cursor: pointer; }
.ios-list-item:active { background-color: #e5e5e5; }
.ios-icon-box { width: 29px; height: 29px; border-radius: 7px; display: flex; align-items: center; justify-content: center; margin-right: 12px; flex-shrink: 0; }
.ios-icon-box svg { width: 18px; height: 18px; fill: white; }

.ios-item-content { flex: 1; display: flex; align-items: center; justify-content: space-between; padding-right: 16px; padding-top: 11px; padding-bottom: 11px; border-bottom: 1px solid #e5e5e5; height: 100%; }
.ios-list-item:last-child .ios-item-content { border-bottom: none; }

.ios-item-label { font-size: 16px; color: #000; }
.ios-item-right { display: flex; align-items: center; color: #8e8e93; font-size: 16px; }
.chevron-right { width: 14px; height: 14px; fill: #c7c7cc; margin-left: 6px; opacity: 0.7; }

/* --- Apple ID 页面专用样式 --- */
.profile-header {
    display: flex; flex-direction: column; align-items: center; padding: 30px 0; background: #fff; border-bottom: 1px solid #e5e5e5;
}
.profile-header-avatar {
    width: 80px; height: 80px; border-radius: 50%; background: #e5e5ea; margin-bottom: 15px;
    background-size: cover; background-position: center; position: relative; cursor: pointer;
    display: flex; align-items: center; justify-content: center; font-size: 32px; color: #8e8e93;
}
.profile-edit-badge {
    position: absolute; bottom: 0; right: 0; background: var(--blue); color: white;
    font-size: 10px; padding: 2px 6px; border-radius: 10px; border: 2px solid #fff;
}
.profile-header-name { font-size: 22px; font-weight: 600; margin-bottom: 5px; cursor: pointer; }
.profile-header-email { font-size: 14px; color: #8e8e93; }

/* --- 存储分析弹窗样式 --- */
.storage-chart-container {
    display: flex; flex-direction: column; align-items: center; padding: 20px;
}
.chart-wrapper { position: relative; width: 180px; height: 180px; margin-bottom: 20px; }
.chart-canvas { width: 100%; height: 100%; transform: rotate(-90deg); }
.chart-center-text {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    text-align: center;
}
.chart-total { font-size: 24px; font-weight: 600; color: #000; }
.chart-label { font-size: 12px; color: #8e8e93; }

.chart-legend { width: 100%; display: flex; flex-direction: column; gap: 8px; }
.legend-item { display: flex; align-items: center; font-size: 14px; }
.legend-color { width: 12px; height: 12px; border-radius: 3px; margin-right: 10px; }
.legend-name { flex: 1; }
.legend-value { color: #8e8e93; }

/* --- 世界书 (Worldbook) 样式 --- */
.wb-view-container {
    display: flex; width: 200%; height: 100%;
    transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1);
}
.wb-view-page { width: 50%; height: 100%; overflow-y: auto; position: relative; padding-bottom: 80px; }

.wb-list-container { background: #fff; border-top: 1px solid #e5e5e5; border-bottom: 1px solid #e5e5e5; }
.wb-list-item-wrapper { position: relative; overflow: hidden; border-bottom: 1px solid #e5e5e5; height: 60px; }
.wb-list-item-wrapper:last-child { border-bottom: none; }

.wb-swipe-box {
    display: flex; width: 100%; height: 100%;
    transition: transform 0.2s ease-out;
    will-change: transform;
}

.wb-list-item {
    width: 100%; flex-shrink: 0; background: #fff;
    display: flex; align-items: center; padding: 0 16px;
    cursor: pointer;
}
.wb-list-item:active { background-color: #f2f2f7; }

.wb-item-info { flex: 1; overflow: hidden; }
.wb-item-title { font-size: 17px; font-weight: 600; color: #000; margin-bottom: 4px; }
.wb-item-desc { font-size: 13px; color: #8e8e93; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.wb-item-type { font-size: 12px; color: var(--blue); background: rgba(0,122,255,0.1); padding: 2px 6px; border-radius: 4px; margin-left: 8px; vertical-align: middle; }

.wb-delete-btn {
    width: 80px; height: 100%; background: var(--red); color: white;
    display: flex; align-items: center; justify-content: center;
    font-weight: 600; font-size: 15px; flex-shrink: 0;
}

.wb-group-item { background: #fff; border-bottom: 1px solid #e5e5e5; }
.wb-group-swipe-wrapper { position: relative; overflow: hidden; height: 50px; background: #fff; }

.wb-group-header {
    padding: 0 16px; display: flex; justify-content: space-between; align-items: center;
    cursor: pointer; background: #fff; width: 100%; height: 100%; flex-shrink: 0;
}
.wb-group-header:active { background: #f2f2f7; }
.wb-group-name { font-size: 17px; font-weight: 600; }
.wb-group-count { color: #8e8e93; font-size: 15px; }

.wb-group-content {
    max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;
    background: #f9f9f9;
}
.wb-group-content.expanded { max-height: 1000px; transition: max-height 0.5s ease-in; }

.wb-group-content .wb-list-item-wrapper { border-bottom: 1px solid #e5e5e5; padding-left: 16px; height: 44px; }
.wb-group-content .wb-list-item { background: #f9f9f9; padding: 10px 16px 10px 0; height: 100%; }
.wb-group-content .wb-item-title { font-size: 15px; margin-bottom: 0; }
.wb-group-content .wb-item-desc { display: none; }
.wb-group-content .wb-item-type { display: none; }

.wb-add-group-btn {
    margin: 20px 16px; padding: 12px; background: #e5e5ea; color: var(--blue);
    text-align: center; border-radius: 10px; font-weight: 600; cursor: pointer;
}

/* --- 通用弹窗 --- */
.custom-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 2000; display: flex; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity 0.2s; }
.custom-modal-overlay.active { opacity: 1; pointer-events: auto; }
.custom-modal { background: rgba(245, 245, 245, 0.95); backdrop-filter: blur(10px); width: 280px; border-radius: 14px; overflow: hidden; text-align: center; transform: scale(1.1); transition: transform 0.2s; }
.custom-modal-overlay.active .custom-modal { transform: scale(1); }
.modal-title { padding: 20px 15px 5px 15px; font-weight: 600; font-size: 17px; }
.modal-desc { padding: 0 15px 15px 15px; font-size: 13px; color: #666; }
.modal-input-container { padding: 0 15px 15px 15px; display: none; }
.modal-input-container.show { display: block; }
.modal-input-container input { background: #fff; border: 1px solid #ccc; text-align: left; }
.modal-buttons { display: flex; border-top: 1px solid #ccc; }
.modal-btn { flex: 1; padding: 12px; background: transparent; border: none; font-size: 17px; cursor: pointer; color: var(--blue); border-right: 1px solid #ccc; }
.modal-btn:last-child { border-right: none; font-weight: 600; }
.modal-btn.destructive { color: #ff3b30; }
.modal-btn:active { background: rgba(0,0,0,0.05); }

/* --- iOS 系统级加载通知 --- */
.wc-ios-loading-overlay {
    position: fixed; top: 60px; left: 50%; transform: translateX(-50%);
    width: auto; height: auto; background: transparent; z-index: 20000;
    display: flex; align-items: flex-start; justify-content: center;
    opacity: 1; transition: opacity 0.3s ease, transform 0.3s ease; pointer-events: none;
}
.wc-ios-loading-overlay.hidden { opacity: 0; transform: translateX(-50%) translateY(-20px); pointer-events: none; }
.wc-ios-loading-box {
    min-width: 200px; height: 50px; background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    border-radius: 25px; display: flex; flex-direction: row; align-items: center;
    justify-content: center; padding: 0 20px; color: #000;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15); gap: 10px; pointer-events: auto;
}
.wc-ios-spinner {
    width: 20px; height: 20px; border: 2px solid rgba(0,0,0,0.1);
    border-top: 2px solid #000; border-radius: 50%; animation: wcSpin 1s linear infinite; margin-bottom: 0;
}
@keyframes wcSpin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
.wc-ios-success-icon, .wc-ios-error-icon { width: 24px; height: 24px; stroke: #000; stroke-width: 2; fill: none; margin-bottom: 0; }
.wc-ios-success-icon { stroke: var(--green); }
.wc-ios-error-icon { stroke: var(--red); }
.wc-ios-success-icon.hidden, .wc-ios-error-icon.hidden { display: none; }
.wc-ios-loading-text { font-size: 14px; font-weight: 500; color: #000; }

/* --- iOS Notification Banner --- */
#ios-notification-container {
    position: fixed; top: 10px; left: 0; width: 100%; z-index: 9999;
    display: flex; flex-direction: column; align-items: center; pointer-events: none;
}
.ios-notification-banner {
    width: 90%; max-width: 360px; background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    padding: 12px; margin-bottom: 10px; display: flex; align-items: flex-start;
    pointer-events: auto; cursor: pointer; transform: translateY(-100px);
    opacity: 0; transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.4s ease;
}
.ios-notification-banner.active { transform: translateY(0); opacity: 1; }
.ios-notif-icon { width: 38px; height: 38px; border-radius: 8px; margin-right: 12px; flex-shrink: 0; object-fit: cover; }
.ios-notif-content { flex: 1; overflow: hidden; }
.ios-notif-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2px; }
.ios-notif-title { font-size: 15px; font-weight: 600; color: #000; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.ios-notif-time { font-size: 12px; color: #8E8E93; }
.ios-notif-msg { font-size: 14px; color: #333; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-height: 1.3; }

.wc-unread-badge {
    position: absolute; top: -5px; right: -5px; background: #FF3B30; color: white;
    border-radius: 10px; padding: 0 6px; font-size: 12px; min-width: 20px; height: 20px;
    display: flex; align-items: center; justify-content: center; z-index: 10;
    border: 1px solid #fff; font-weight: 600;
}

/* ========================================== */
/* WeChat App 样式 */
/* ========================================== */
#wechat-root {
    --wc-bg-color: #F2F2F7; --wc-chat-bg: #EDEDED; --wc-card-color: #FFFFFF;
    --wc-text-primary: #000000; --wc-text-secondary: #8E8E93;
    --wc-accent-blue: #007AFF; --wc-accent-green: #34C759; --wc-danger-red: #FF3B30;
    --wc-pin-gray: #C7C7CC; --wc-transfer-orange: #FA9D3B; --wc-separator: #C6C6C8;
    --wc-safe-area-top: env(safe-area-inset-top, 20px);
    --wc-safe-area-bottom: env(safe-area-inset-bottom, 20px);
    --wc-input-height: 56px; --wc-panel-height: 300px; --wc-navbar-height: 54px;

    width: 100%; height: 100%; position: relative; overflow: hidden;
    background-color: var(--wc-bg-color); color: var(--wc-text-primary);
    display: flex; flex-direction: column;
}
#wechat-root * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: inherit; outline: none; user-select: none; }
#wechat-root input, #wechat-root textarea { user-select: auto; }

.wc-icon { width: 24px; height: 24px; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; fill: none; }
.wc-icon-fill { fill: currentColor; stroke: none; }

.wc-navbar {
    height: calc(var(--wc-navbar-height) + var(--wc-safe-area-top));
    padding-top: var(--wc-safe-area-top);
    background: rgba(242, 242, 247, 0.95); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    display: flex; align-items: center; justify-content: space-between;
    padding-left: 16px; padding-right: 16px; position: absolute; top: 0; width: 100%; z-index: 1300;
    border-bottom: 0.5px solid rgba(0,0,0,0.1);
}
.wc-nav-left, .wc-nav-right { width: 80px; display: flex; align-items: center; }
.wc-nav-right { justify-content: flex-end; gap: 15px; }
.wc-nav-title { font-weight: 600; font-size: 18px; flex: 1; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.wc-nav-btn { background: none; border: none; color: var(--wc-text-primary); font-size: 16px; cursor: pointer; padding: 0; display: flex; align-items: center; }

.wc-main-content {
    flex: 1; overflow-y: auto;
    padding-top: calc(var(--wc-navbar-height) + var(--wc-safe-area-top));
    padding-bottom: 80px; -webkit-overflow-scrolling: touch; position: relative;
}

.wc-page {
    display: none; padding: 16px; min-height: 100%; position: absolute;
    top: 0; left: 0; width: 100%; height: 100%; overflow-y: auto;
    padding-top: calc(var(--wc-navbar-height) + var(--wc-safe-area-top));
    padding-bottom: 80px; background-color: var(--wc-bg-color);
}
.wc-page.active { display: block; animation: wcFadeIn 0.2s ease; }

#wc-view-chat-detail {
    padding: 0; background-color: var(--wc-chat-bg); display: none; flex-direction: column;
    height: 100%; position: absolute; top: 0; left: 0; width: 100%; z-index: 1100; overflow: hidden;
}
#wc-view-chat-detail.active { display: flex; }

.wc-chat-background { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 1; z-index: -1; }
.wc-chat-scroll-area {
    flex: 1; overflow-y: auto;
    padding: calc(var(--wc-navbar-height) + var(--wc-safe-area-top) + 10px) 16px 20px 16px;
    display: flex; flex-direction: column; gap: 16px;
    transition: padding-bottom 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
    position: relative; z-index: 1; overscroll-behavior: contain; scroll-behavior: auto;
}

.wc-message-row { display: flex; align-items: flex-start; gap: 8px; max-width: 100%; position: relative; }
.wc-message-row.me { flex-direction: row-reverse; }
.wc-message-row.system { justify-content: center; flex-direction: row; align-items: center; margin: 10px 0; }
.wc-chat-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; flex-shrink: 0; border: 0.5px solid rgba(0,0,0,0.1); }

.wc-msg-checkbox { width: 20px; height: 20px; border-radius: 50%; border: 2px solid #C6C6C8; margin-right: 10px; display: none; flex-shrink: 0; align-self: center; }
.wc-msg-checkbox.checked { background: var(--wc-accent-blue); border-color: var(--wc-accent-blue); background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E"); background-size: 70%; background-position: center; background-repeat: no-repeat; }
.multi-select-mode .wc-msg-checkbox { display: block; }

.wc-bubble-container { display: flex; flex-direction: column; max-width: 75%; }
.wc-message-row.me .wc-bubble-container { align-items: flex-end; }

.wc-bubble {
    padding: 8px 12px; border-radius: 10px; font-size: 16px; line-height: 1.5;
    word-wrap: break-word; position: relative; user-select: text; min-height: 32px;
    display: flex; flex-direction: column; align-items: flex-start;
}
.wc-bubble.them { background: #F2F2F7; color: #000; border: none; }
.wc-bubble.me { background: #FFFFFF; color: #000; border: 0.5px solid rgba(0,0,0,0.05); align-items: flex-end; }
.wc-bubble.me:has(.wc-quote-block) { align-items: flex-start; }
.wc-bubble-sticker { background: transparent !important; border: none !important; padding: 0; }
.wc-sticker-img { max-width: 120px; max-height: 120px; border-radius: 4px; }
.wc-bubble-img { max-width: 100%; border-radius: 10px; display: block; }

.wc-quote-block {
    font-size: 12px; color: #666; background: rgba(0,0,0,0.05); padding: 4px 8px;
    border-left: 3px solid #C6C6C8; margin-bottom: 6px; border-radius: 2px;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; width: 100%; text-align: left;
}

.wc-bubble.voice { display: flex; flex-direction: row; align-items: center; gap: 4px; min-width: 60px; cursor: pointer; height: 36px; padding: 0 12px; }
.wc-bubble.voice.me { flex-direction: row-reverse; }
.wc-voice-bars { display: flex; align-items: center; gap: 3px; height: 16px; }
.wc-voice-bar { width: 3px; background-color: #000; border-radius: 2px; animation: wcVoiceWave 1s infinite ease-in-out; animation-play-state: paused; }
.wc-bubble.voice:active .wc-voice-bar { animation-play-state: running; }
.wc-voice-bar:nth-child(1) { height: 8px; animation-delay: 0s; }
.wc-voice-bar:nth-child(2) { height: 16px; animation-delay: 0.2s; }
.wc-voice-bar:nth-child(3) { height: 10px; animation-delay: 0.4s; }
@keyframes wcVoiceWave { 0%, 100% { height: 6px; } 50% { height: 16px; } }

.wc-bubble.transfer { padding: 0; background: var(--wc-transfer-orange); border: none; width: 200px; max-width: 100%; border-radius: 10px; overflow: hidden; display: flex; flex-direction: column; cursor: pointer; }
.wc-bubble.transfer.received { background: #F7D6A8; }
.wc-transfer-content { padding: 16px; display: flex; align-items: center; gap: 12px; }
.wc-transfer-icon-circle { width: 40px; height: 40px; border-radius: 50%; border: 2px solid #fff; display: flex; align-items: center; justify-content: center; color: #fff; }
.wc-transfer-info { display: flex; flex-direction: column; color: #fff; }
.wc-transfer-amount { font-size: 16px; font-weight: 500; }
.wc-transfer-desc { font-size: 13px; opacity: 0.9; }

.wc-bubble.invite { width: 200px; height: 80px; padding: 0; background: #fff; border-radius: 12px; display: flex; flex-direction: row; align-items: center; box-shadow: 0 4px 12px rgba(255, 182, 193, 0.3); overflow: hidden; border: 1px solid #FFE4E1; cursor: pointer; }
.wc-invite-header { width: 60px; height: 100%; background: #FFF0F5; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.wc-invite-body { flex: 1; padding: 0 12px; display: flex; flex-direction: column; justify-content: center; height: 100%; }
.wc-invite-title { font-size: 14px; font-weight: 600; color: #333; margin-bottom: 4px; }
.wc-invite-status { font-size: 11px; color: #FF9A9E; font-weight: 500; }

.wc-system-msg-text { background: rgba(0,0,0,0.1); color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 12px; text-align: center; max-width: 80%; }
.wc-system-msg-text.transparent { background: transparent; color: #8E8E93; }
.wc-msg-timestamp-outside { font-size: 10px; color: #8E8E93; margin: 0 4px; white-space: nowrap; align-self: flex-end; margin-bottom: 2px; }

#wc-context-menu { position: absolute; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); z-index: 2000; display: none; flex-direction: column; min-width: 150px; overflow: hidden; animation: wcPopIn 0.1s ease-out; }
.wc-ctx-item { padding: 12px 16px; font-size: 14px; border-bottom: 0.5px solid rgba(0,0,0,0.1); cursor: pointer; display: flex; align-items: center; gap: 8px; }
.wc-ctx-item:last-child { border-bottom: none; }
.wc-ctx-item:active { background: #F2F2F7; }

.wc-chat-footer {
    position: relative; bottom: auto; left: 0; width: 100%; background: #F7F7F7;
    border-top: 0.5px solid #C6C6C8; padding: 8px 12px calc(8px + var(--wc-safe-area-bottom)) 12px;
    display: flex; align-items: flex-end; gap: 10px; z-index: 1200; flex-shrink: 0;
    transition: margin-bottom 0.25s cubic-bezier(0.25, 0.1, 0.25, 1);
}
.wc-chat-footer.panel-active { margin-bottom: var(--wc-panel-height); border-bottom: 1px solid #C6C6C8; padding-bottom: 8px; }

/* 键盘弹出时，取消底部安全区 Padding，防止输入框和键盘之间有空隙 */
body.keyboard-open .wc-chat-footer {
    padding-bottom: 8px;
}

#wc-quote-preview-area { position: absolute; top: -40px; left: 0; width: 100%; height: 40px; background: rgba(247, 247, 247, 0.95); border-top: 0.5px solid #C6C6C8; display: none; align-items: center; padding: 0 12px; font-size: 13px; color: #666; justify-content: space-between; }
.wc-chat-input { flex: 1; background: #FFFFFF; border: none; border-radius: 4px; padding: 10px; font-size: 16px; max-height: 100px; min-height: 40px; resize: none; }
.wc-footer-icon { width: 28px; height: 28px; color: #1C1C1E; cursor: pointer; flex-shrink: 0; margin-bottom: 6px; }
.wc-btn-ai-reply { background: none; border: none; padding: 0; cursor: pointer; color: var(--wc-accent-blue); margin-bottom: 6px; }
.wc-btn-ai-reply svg { width: 28px; height: 28px; fill: currentColor; }

#wc-multi-select-footer { position: absolute; bottom: 0; left: 0; width: 100%; height: calc(60px + var(--wc-safe-area-bottom)); background: #F7F7F7; border-top: 0.5px solid #C6C6C8; display: none; align-items: center; justify-content: center; gap: 16px; z-index: 1250; padding-bottom: var(--wc-safe-area-bottom); }

.wc-panel-container { position: absolute; bottom: 0; left: 0; width: 100%; height: var(--wc-panel-height); background: #F2F2F7; z-index: 1150; transform: translateY(100%); transition: transform 0.25s cubic-bezier(0.25, 0.1, 0.25, 1); display: flex; flex-direction: column; border-top: 1px solid #C6C6C8; padding-bottom: var(--wc-safe-area-bottom); }
.wc-panel-container.active { transform: translateY(0); }

.wc-sticker-grid-area { flex: 1; overflow-y: auto; padding: 12px; display: grid; grid-template-columns: repeat(4, 1fr); grid-auto-rows: max-content; gap: 12px; }
.wc-sticker-tab-bar { height: 45px; background: #fff; display: flex; align-items: center; border-top: 0.5px solid #E5E5EA; overflow-x: auto; }
.wc-sticker-add-btn { width: 50px; height: 100%; display: flex; align-items: center; justify-content: center; border-right: 0.5px solid #E5E5EA; background: #fff; flex-shrink: 0; cursor: pointer; }
.wc-sticker-tabs-scroll { flex: 1; display: flex; height: 100%; overflow-x: auto; }
.wc-sticker-tab-item { padding: 0 16px; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 14px; color: var(--wc-text-secondary); cursor: pointer; white-space: nowrap; background: #fff; }
.wc-sticker-tab-item.active { background: #F2F2F7; color: var(--wc-text-primary); font-weight: 500; }
.wc-sticker-item { aspect-ratio: 1; background: #fff; border-radius: 8px; display: flex; align-items: center; justify-content: center; cursor: pointer; position: relative; }
.wc-sticker-item img { width: 80%; height: 80%; object-fit: contain; }
.wc-sticker-delete-badge { position: absolute; top: -6px; right: -6px; width: 20px; height: 20px; background: var(--wc-danger-red); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: bold; z-index: 2; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
.wc-sticker-item.shake { animation: wcShake 0.2s infinite; }
@keyframes wcShake { 0% { transform: rotate(0deg); } 25% { transform: rotate(1deg); } 50% { transform: rotate(0deg); } 75% { transform: rotate(-1deg); } 100% { transform: rotate(0deg); } }

.wc-more-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 24px; }
.wc-more-item { display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; }
.wc-more-icon-box { width: 60px; height: 60px; background: #fff; border-radius: 16px; display: flex; align-items: center; justify-content: center; color: #333; border: 1px solid #E5E5EA; }
.wc-more-label { font-size: 12px; color: var(--wc-text-secondary); text-align: center; }

.wc-modal { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.4); z-index: 2000; display: flex; justify-content: center; align-items: center; opacity: 1; transition: opacity 0.2s; }
.wc-modal.hidden { display: none; opacity: 0; pointer-events: none; }
.wc-modal-content { background: #fff; width: 90%; max-width: 400px; border-radius: 14px; overflow: hidden; animation: wcPopIn 0.2s ease-out; }
#wc-modal-add-char .wc-modal-content, #wc-modal-edit-mask .wc-modal-content, #wc-modal-masks .wc-modal-content { width: 100%; max-width: 100%; border-radius: 16px 16px 0 0; position: absolute; bottom: 0; margin: 0; animation: wcSlideUpModal 0.3s cubic-bezier(0.25, 0.1, 0.25, 1); }
.wc-modal[style*="align-items: flex-end"] .wc-modal-content { width: 100%; max-width: 100%; border-radius: 12px 12px 0 0; margin: 0; animation: wcSlideUpModal 0.3s cubic-bezier(0.25, 0.1, 0.25, 1); }
#wc-modal-phone-settings { z-index: 6000 !important; }
@keyframes wcPopIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
@keyframes wcSlideUpModal { from { transform: translateY(100%); } to { transform: translateY(0); } }

.wc-modal-header { padding: 16px; border-bottom: 0.5px solid #E5E5EA; display: flex; justify-content: space-between; align-items: center; }
.wc-modal-header h3 { margin: 0; font-size: 17px; font-weight: 600; }
.wc-close-btn { background: none; border: none; font-size: 24px; color: #8E8E93; cursor: pointer; padding: 0; line-height: 1; }
.wc-modal-body { padding: 20px; max-height: 80vh; overflow-y: auto; }
.wc-setting-group { margin-bottom: 16px; }
.wc-setting-group label { display: block; font-size: 14px; color: #8E8E93; margin-bottom: 8px; }
.wc-setting-group input, .wc-setting-group textarea, .wc-setting-group select { width: 100%; padding: 12px; background: #F2F2F7; border: none; border-radius: 10px; font-size: 16px; appearance: none; }
.wc-ios-btn-block { width: 100%; padding: 14px; background: var(--wc-accent-blue); color: white; border: none; border-radius: 12px; font-size: 17px; font-weight: 600; cursor: pointer; }
.wc-ios-btn-block.wc-btn-secondary { background: #E5E5EA; color: #000; }
.wc-ios-btn-block.wc-btn-danger { background: var(--wc-danger-red); color: white; }
.wc-ios-list-group { background: rgba(242, 242, 247, 0.8); backdrop-filter: blur(10px); }
.wc-list-item.center-content { justify-content: center; cursor: pointer; }
.wc-list-item.center-content:active { background-color: #E5E5EA !important; }

.wc-wallet-header { background: var(--wc-card-color); padding: 40px 20px; text-align: center; margin-bottom: 20px; display: flex; flex-direction: column; align-items: center; }
.wc-wallet-icon-lg { width: 60px; height: 60px; color: var(--wc-transfer-orange); margin-bottom: 16px; }
.wc-wallet-balance-label { font-size: 14px; color: var(--wc-text-secondary); margin-bottom: 8px; }
.wc-wallet-balance-num { font-size: 36px; font-weight: 700; color: #000; margin-bottom: 24px; }
.wc-wallet-btn-row { display: flex; gap: 16px; width: 100%; max-width: 300px; }
.wc-transaction-item { padding: 16px; display: flex; justify-content: space-between; align-items: center; border-bottom: 0.5px solid var(--wc-separator); background: var(--wc-card-color); }
.wc-trans-info { display: flex; flex-direction: column; }
.wc-trans-title { font-size: 16px; margin-bottom: 4px; }
.wc-trans-time { font-size: 12px; color: var(--wc-text-secondary); }
.wc-trans-amount { font-size: 17px; font-weight: 600; }
.wc-amount-in { color: var(--wc-accent-green); }
.wc-amount-out { color: #000; }

#wc-view-memory { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #F2F2F7; z-index: 1400; display: none; flex-direction: column; }
#wc-view-memory.active { display: flex; animation: wcSlideInRight 0.3s ease; }
@keyframes wcSlideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }
.wc-memory-card { background: #fff; border-radius: 12px; padding: 16px; margin-bottom: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.03); position: relative; }
.wc-memory-header { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px; color: #8E8E93; padding-right: 20px; }
.wc-memory-content { font-size: 15px; line-height: 1.5; color: #333; }
.wc-memory-delete-btn { position: absolute; top: 12px; right: 12px; color: #FF3B30; cursor: pointer; font-size: 12px; font-weight: 600; }

#wc-modal-char-detail .wc-modal-content { width: 320px; height: 450px; border-radius: 20px; position: relative; bottom: auto; margin: auto; display: flex; flex-direction: column; align-items: center; padding: 0; background: #fff; }
.wc-contact-card-header { width: 100%; height: 240px; position: relative; }
.wc-contact-card-img { width: 100%; height: 100%; object-fit: cover; border-radius: 20px 20px 0 0; }
.wc-contact-card-info { flex: 1; width: 100%; padding: 20px; display: flex; flex-direction: column; align-items: center; }
.wc-contact-card-name { font-size: 24px; font-weight: 700; margin-bottom: 4px; }
.wc-contact-card-note { font-size: 14px; color: #8E8E93; margin-bottom: 20px; }
.wc-contact-card-edit-btn { position: absolute; top: 16px; right: 16px; background: rgba(0,0,0,0.3); border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; color: white; cursor: pointer; backdrop-filter: blur(4px); }
.wc-contact-card-close-btn { position: absolute; top: 16px; left: 16px; background: rgba(0,0,0,0.3); border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; color: white; cursor: pointer; backdrop-filter: blur(4px); z-index: 10; }

#wc-view-phone-sim { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; height: 100dvh; background-color: #000; z-index: 10000; display: none; justify-content: center; align-items: center; padding: 0; }
#wc-view-phone-sim.active { display: flex; animation: wcFadeIn 0.3s ease; }
.wc-phone-bezel { width: 100%; max-width: 100%; height: 100%; max-height: 100%; background: #000; border-radius: 0; border: none; box-shadow: none; overflow: hidden; position: relative; display: flex; flex-direction: column; }
.wc-phone-sticky-note { position: absolute; top: 20px; right: 20px; width: 100px; height: 100px; background: #fff; box-shadow: 2px 2px 5px rgba(0,0,0,0.3); transform: rotate(5deg); z-index: 200; cursor: pointer; padding: 5px; display: flex; align-items: center; justify-content: center; transition: transform 0.2s; }
.wc-phone-sticky-note:active { transform: rotate(5deg) scale(0.95); }
.wc-phone-sticky-note::before { content: ''; position: absolute; top: -10px; left: 30%; width: 40px; height: 20px; background: rgba(255, 255, 255, 0.5); transform: rotate(-5deg); box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
.wc-sticky-note-content { width: 100%; height: 100%; background-size: cover; background-position: center; background-color: #f9f9f9; border: 1px solid #eee; }
.wc-phone-fingerprint { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); width: 50px; height: 50px; z-index: 100; cursor: pointer; opacity: 0.8; animation: wcPulse 2s infinite; background: rgba(0, 0, 0, 0.3); border-radius: 50%; border: 1px solid rgba(255, 255, 255, 0.3); backdrop-filter: blur(5px); padding: 8px; }
@keyframes wcPulse { 0% { opacity: 0.6; transform: translateX(-50%) scale(1); } 50% { opacity: 1; transform: translateX(-50%) scale(1.1); } 100% { opacity: 0.6; transform: translateX(-50%) scale(1); } }
.wc-phone-home-indicator { display: none; }
.wc-phone-screen { flex: 1; background-size: cover; background-position: center; display: flex; flex-direction: column; padding-top: 30px; position: relative; overflow: hidden; }
.wc-phone-sim-navbar { height: 88px; display: flex; justify-content: space-between; align-items: flex-end; padding: 0 16px 10px 16px; color: white; z-index: 10; }
.wc-ios-desktop { flex: 1; display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(6, 1fr); gap: 15px; padding: 20px; align-content: start; position: relative; }
.wc-ios-widget-clock { grid-column: span 4; grid-row: span 2; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
.wc-ios-clock-time { font-size: 60px; font-weight: 200; line-height: 1; }
.wc-ios-clock-date { font-size: 16px; margin-top: 5px; font-weight: 500; }
.wc-ios-app-item { display: flex; flex-direction: column; align-items: center; gap: 5px; cursor: pointer; }
.wc-ios-app-icon { width: 100%; aspect-ratio: 1; background: rgba(255,255,255,0.9); border-radius: 14px; display: flex; align-items: center; justify-content: center; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
.wc-ios-app-icon img { width: 100%; height: 100%; object-fit: cover; }
.wc-ios-app-name { font-size: 11px; color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.8); text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%; }

.wc-phone-app-view { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #F2F2F7; z-index: 20; display: flex; flex-direction: column; animation: wcPopIn 0.2s ease-out; }
.wc-phone-app-content { flex: 1; overflow-y: auto; padding-top: 0; padding-bottom: 0; }
.wc-phone-app-tabbar { height: 50px; background: #F7F7F7; border-top: 0.5px solid #C6C6C8; display: flex; justify-content: space-around; align-items: center; flex-shrink: 0; width: 100%; position: relative; z-index: 100; }
.wc-phone-tab-item { display: flex; flex-direction: column; align-items: center; font-size: 10px; color: #8E8E93; cursor: pointer; }
.wc-phone-tab-item.active { color: #007AFF; }

.wc-chat-swipe-container { position: relative; overflow: hidden; background: var(--wc-card-color); margin: 8px 16px; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.wc-chat-swipe-actions { position: absolute; right: 0; top: 0; bottom: 0; display: flex; z-index: 1; }
.wc-chat-action-btn { width: 80px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 14px; }
.wc-btn-pin { background-color: var(--wc-pin-gray); }
.wc-chat-swipe-content { position: relative; z-index: 2; background: var(--wc-card-color); width: 100%; height: 100%; display: flex; align-items: center; padding: 12px 16px; transition: transform 0.2s ease-out; }
.wc-pinned-chat { background-color: #FFFFFF !important; }
.wc-list-separator { text-align: center; color: #C7C7CC; font-size: 12px; padding: 5px 0; background: var(--wc-bg-color); }
@keyframes wcFadeIn { from { opacity: 0; } to { opacity: 1; } }

.wc-tabbar-container { position: absolute; bottom: 30px; left: 0; width: 100%; display: flex; justify-content: center; z-index: 1000; pointer-events: none; }
.wc-tabbar { width: 320px; height: 64px; background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); border-radius: 32px; display: flex; justify-content: space-around; align-items: center; box-shadow: 0 10px 25px rgba(0,0,0,0.1); pointer-events: auto; }
.wc-tab-item { display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--wc-text-secondary); font-size: 10px; width: 60px; cursor: pointer; transition: color 0.2s; }
.wc-tab-item.active { color: var(--wc-text-primary); }
.wc-tab-item svg { margin-bottom: 4px; }

.wc-card { background: var(--wc-card-color); border-radius: 16px; padding: 16px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.02); }
.wc-list-group { background: var(--wc-card-color); border-radius: 16px; overflow: hidden; }
.wc-list-item { padding: 12px 16px; display: flex; align-items: center; border-bottom: 0.5px solid var(--wc-separator); background: var(--wc-card-color); position: relative; transition: transform 0.2s ease-out; cursor: pointer; }
.wc-list-item:last-child { border-bottom: none; }
.wc-avatar { width: 48px; height: 48px; border-radius: 6px; background-color: #E5E5EA; object-fit: cover; margin-right: 12px; flex-shrink: 0; }
.wc-item-content { flex: 1; overflow: hidden; }
.wc-item-title { font-weight: 600; font-size: 16px; margin-bottom: 4px; }
.wc-item-subtitle { color: var(--wc-text-secondary); font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.wc-swipe-container { position: relative; overflow: hidden; background: var(--wc-danger-red); border-radius: 0; }
.wc-swipe-container:first-child { border-top-left-radius: 16px; border-top-right-radius: 16px; }
.wc-swipe-container:last-child { border-bottom-left-radius: 16px; border-bottom-right-radius: 16px; }
.wc-swipe-actions { position: absolute; right: 0; top: 0; bottom: 0; width: 80px; background-color: var(--wc-danger-red); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; z-index: 0; }
.wc-swipe-content { position: relative; z-index: 1; background: var(--wc-card-color); width: 100%; height: 100%; display: flex; align-items: center; padding: 12px 16px; transition: transform 0.2s ease-out; border-bottom: 0.5px solid var(--wc-separator); }

.wc-moments-header { position: relative; margin-bottom: 40px; }
.wc-moments-cover { width: 100%; height: 240px; background-color: #333; object-fit: cover; cursor: pointer; }
.wc-moments-user-avatar { position: absolute; bottom: -30px; right: 20px; width: 80px; height: 80px; border-radius: 12px; border: 3px solid #fff; background-color: #ccc; object-fit: cover; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
.wc-moment-card { padding: 16px; border-bottom: 0.5px solid var(--wc-separator); background: transparent; display: flex; align-items: flex-start; }
.wc-moment-content { margin-left: 10px; flex: 1; }
.wc-moment-name { color: #576B95; font-weight: 600; margin-bottom: 6px; }
.wc-moment-text { font-size: 15px; line-height: 1.4; margin-bottom: 8px; }
.wc-moment-image { width: 100%; max-width: 200px; height: auto; border-radius: 4px; margin-bottom: 8px; display: block; }
.wc-moment-image-placeholder { width: 100%; max-width: 240px; background: #F2F2F7; border: 1px solid #E5E5EA; border-radius: 4px; padding: 12px; margin-bottom: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--wc-text-secondary); font-size: 13px; text-align: center; }
.wc-moment-actions { display: flex; justify-content: space-between; align-items: center; margin-top: 8px; }
.wc-moment-likes-comments { background: #F2F2F7; border-radius: 4px; margin-top: 8px; padding: 8px; font-size: 13px; }
.wc-moment-like-row { color: #576B95; margin-bottom: 4px; display: flex; align-items: center; }
.wc-moment-comment-row { margin-bottom: 2px; }
.wc-moment-comment-name { color: #576B95; font-weight: 600; }
.wc-comment-input-box { display: flex; margin-top: 8px; gap: 8px; }
.wc-comment-input { flex: 1; border: 1px solid #E5E5EA; border-radius: 4px; padding: 4px 8px; font-size: 14px; }

.wc-user-header { display: flex; flex-direction: column; align-items: center; padding: 30px 0; }
.wc-user-avatar-lg { width: 100px; height: 100px; border-radius: 12px; margin-bottom: 16px; object-fit: cover; border: 1px solid #E5E5EA; }

.wc-modal-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 2000; display: none; justify-content: center; align-items: flex-end; }
.wc-modal-overlay.active { display: flex; }
.wc-form-group { margin-bottom: 16px; }
.wc-form-label { display: block; font-size: 14px; color: var(--wc-text-secondary); margin-bottom: 8px; }
.wc-form-input, .wc-form-textarea { width: 100%; padding: 12px; background: #F2F2F7; border: none; border-radius: 10px; font-size: 16px; }
.wc-form-textarea { height: 100px; resize: none; }
.wc-btn-primary { width: 100%; padding: 14px; background: var(--wc-text-primary); color: #fff; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; margin-top: 10px; }
.wc-btn-secondary { background: #E5E5EA; color: var(--wc-text-primary); margin-top: 10px; }
.wc-btn-danger { background: var(--wc-danger-red); color: white; margin-top: 10px; }
.wc-segmented-control { display: flex; background: #F2F2F7; border-radius: 8px; padding: 2px; margin-bottom: 16px; }
.wc-segment-btn { flex: 1; padding: 8px; text-align: center; font-size: 14px; border-radius: 6px; cursor: pointer; color: var(--wc-text-secondary); transition: all 0.2s; }
.wc-segment-btn.active { background: #fff; color: #000; box-shadow: 0 1px 3px rgba(0,0,0,0.1); font-weight: 500; }
.wc-upload-placeholder { width: 80px; height: 80px; background: #F2F2F7; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; color: var(--wc-text-secondary); cursor: pointer; overflow: hidden; }
.wc-upload-rect-placeholder { width: 100px; height: 100px; background: #F2F2F7; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: var(--wc-text-secondary); cursor: pointer; margin-bottom: 10px; overflow: hidden; }

#wc-modal-chat-settings .wc-modal-content { width: 100%; height: 100%; max-width: 100%; border-radius: 0; display: flex; flex-direction: column; }
.wc-settings-section { background: #fff; border-radius: 12px; padding: 16px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.wc-settings-section-title { font-size: 13px; color: #8E8E93; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
.wc-avatar-row { display: flex; align-items: center; gap: 16px; margin-bottom: 16px; }
.wc-avatar-edit { width: 60px; height: 60px; border-radius: 8px; background: #eee; object-fit: cover; cursor: pointer; }
.wc-checkbox-list { max-height: 150px; overflow-y: auto; background: #F2F2F7; border-radius: 10px; padding: 8px 12px; display: flex; flex-direction: column; gap: 8px; }
.wc-checkbox-item { display: flex; align-items: center; gap: 10px; font-size: 15px; color: #000; cursor: pointer; }
.wc-checkbox-item input[type="checkbox"] { width: 20px; height: 20px; margin: 0; accent-color: var(--wc-accent-blue); }

/* ========================================== */
/* Lovers Space (App 2) Styles - Korean/Ins Style */
/* ========================================== */
.ls-view { display: none; flex-direction: column; height: 100%; width: 100%; background: #fff; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
.ls-view.active { display: flex; }
.ls-navbar { height: 50px; display: flex; justify-content: space-between; align-items: center; padding: 0 16px; margin-top: env(safe-area-inset-top); }
.ls-nav-btn { font-size: 16px; color: #333; cursor: pointer; width: 60px; }
.ls-nav-title { font-weight: 600; font-size: 17px; letter-spacing: 1px; }
.ls-content { flex: 1; overflow-y: auto; padding: 20px; }
.ls-content.center { display: flex; flex-direction: column; align-items: center; justify-content: center; }

.ls-bind-icon { font-size: 48px; color: #FF9A9E; margin-bottom: 20px; }
.ls-bind-title { font-size: 24px; font-weight: 300; margin-bottom: 10px; color: #333; }
.ls-bind-desc { font-size: 14px; color: #999; text-align: center; line-height: 1.6; margin-bottom: 30px; }
.ls-char-list { width: 100%; max-height: 300px; overflow-y: auto; }
.ls-char-item { display: flex; align-items: center; padding: 12px; border-bottom: 1px solid #f5f5f5; cursor: pointer; }
.ls-char-item:active { background: #fafafa; }
.ls-char-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; margin-right: 12px; }
.ls-char-name { font-size: 16px; color: #333; }

.ls-pending-avatar { width: 100px; height: 100px; border-radius: 50%; background: #eee; margin-bottom: 20px; background-size: cover; background-position: center; }
.ls-btn-outline { padding: 10px 30px; border: 1px solid #ddd; background: transparent; border-radius: 20px; color: #666; margin-top: 10px; cursor: pointer; }
.ls-btn-primary { padding: 10px 30px; background: #FF9A9E; border: none; border-radius: 20px; color: white; margin-top: 10px; cursor: pointer; box-shadow: 0 4px 10px rgba(255, 154, 158, 0.3); }

.ls-header { padding: 20px; background: #fff; display: flex; flex-direction: column; align-items: center; border-bottom: 1px solid #f9f9f9; padding-top: env(safe-area-inset-top); }
.ls-header-top { width: 100%; display: flex; justify-content: space-between; margin-bottom: 20px; }
.ls-header-title { font-family: 'Georgia', serif; font-style: italic; font-size: 20px; color: #333; }
.ls-couple-avatars { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
.ls-avatar-circle { width: 70px; height: 70px; border-radius: 50%; background: #eee; background-size: cover; background-position: center; border: 2px solid #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
.ls-heart-beat { font-size: 20px; color: #FF9A9E; animation: lsPulse 1.5s infinite; }
@keyframes lsPulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
.ls-days-counter { text-align: center; cursor: pointer; }
.ls-days-label { font-size: 12px; color: #ccc; letter-spacing: 2px; text-transform: uppercase; display: block; }
.ls-days-num { font-size: 36px; font-weight: 300; color: #333; font-family: 'Helvetica Neue', sans-serif; display: block; margin: 5px 0; }
.ls-date-display { font-size: 12px; color: #ccc; margin-top: 5px; }

.ls-main-content { flex: 1; overflow-y: auto; background: #fff; padding-bottom: 60px; }
.ls-tab-content { display: none; padding: 20px; }
.ls-tab-content.active { display: block; animation: fadeIn 0.3s; }
.ls-section-title { font-size: 14px; font-weight: 600; color: #333; margin-bottom: 15px; letter-spacing: 1px; }

/* Feed List (Log) - Modified for Bubble Style */
.ls-feed-list { display: flex; flex-direction: column; gap: 15px; }
.ls-feed-item { display: flex; gap: 12px; align-items: flex-start; }
.ls-feed-avatar { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; flex-shrink: 0; }
.ls-feed-content { flex: 1; display: flex; flex-direction: column; align-items: flex-start; }

/* 修改后的气泡样式 */
.ls-feed-text { 
    font-size: 10px; /* 字体大小 10px */
    color: #666; /* 字体颜色偏灰 */
    line-height: 1.4; 
    background: #f0f0f0; /* 圆角长方形气泡背景 */
    padding: 8px 12px; /* 内边距 */
    border-radius: 12px; /* 圆角 */
    display: inline-block; /* 包裹内容 */
    max-width: 100%;
    word-wrap: break-word;
}

.ls-feed-time { font-size: 10px; color: #999; margin-top: 4px; margin-left: 4px; }

.ls-empty-state { text-align: center; padding: 40px 0; color: #ccc; }
.ls-icon-placeholder { font-size: 40px; margin-bottom: 10px; opacity: 0.5; }
.ls-setting-group { margin-bottom: 20px; }
.ls-setting-row { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #f5f5f5; }
.ls-setting-title-row { font-size: 14px; color: #333; margin-bottom: 10px; }
.ls-setting-label { flex: 1; }
.ls-setting-title { font-size: 16px; color: #333; margin-bottom: 4px; }
.ls-setting-desc { font-size: 12px; color: #999; }
.ls-toggle { width: 40px; height: 24px; appearance: none; background: #e5e5ea; border-radius: 12px; position: relative; outline: none; cursor: pointer; transition: background 0.3s; }
.ls-toggle::after { content: ''; position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: #fff; border-radius: 50%; transition: transform 0.3s; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
.ls-toggle:checked { background: #34c759; }
.ls-toggle:checked::after { transform: translateX(16px); }
.ls-btn-danger { width: 100%; padding: 15px; background: #fff; border: 1px solid #ff3b30; color: #ff3b30; border-radius: 12px; font-size: 16px; margin-top: 20px; cursor: pointer; }

.ls-tabbar { position: absolute; bottom: 0; left: 0; width: 100%; height: 60px; background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); border-top: 1px solid #eee; display: flex; justify-content: space-around; align-items: center; padding-bottom: env(safe-area-inset-bottom); }
.ls-tab-item { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; color: #ccc; cursor: pointer; transition: color 0.3s; }
.ls-tab-item svg { width: 24px; height: 24px; fill: currentColor; }
.ls-tab-item.active { color: #FF9A9E; }
